# US010 - Interface de Validation Humaine

## 📋 Contexte
L'IA propose des correspondances avec scores de confidence, mais un contrôle humain reste essentiel pour éviter les erreurs et valider les suggestions avant export.

## 🎯 User Story

**En tant que** chef de projet digital,  
**je veux** pouvoir relire et valider les correspondances IA proposées avant export,  
**afin d'** éviter des erreurs de redirection et garder le contrôle sur les décisions finales.

## ✅ Critères d'acceptation

### Interface de validation
- [ ] Tableau interactif avec les correspondances suggérées
- [ ] Colonnes : Ancienne URL, Nouvelle URL proposée, Score confidence, Actions
- [ ] Code couleur basé sur le score de confidence
- [ ] Possibilité d'éditer chaque correspondance manuellement
- [ ] Bouton "Valider tout" pour les suggestions à haute confidence (>0.9)

### Gestion des correspondances
- [ ] Accepter/Rejeter chaque suggestion individuellement
- [ ] Modifier la nouvelle URL proposée dans un dropdown ou champ texte
- [ ] Assigner manuellement une correspondance pour les URLs non matchées
- [ ] Supprimer définitivement une ancienne URL de la liste

### Filters et tri
- [ ] Filtrer par score de confidence (Excellent, Bon, À vérifier)
- [ ] Filtrer par statut (À valider, Validé, Rejeté, Modifié)
- [ ] Tri par confidence croissant/décroissant
- [ ] Recherche textuelle dans les URLs

### Statistiques en temps réel
- [ ] Compteur : X/Y correspondances validées
- [ ] Taux de validation par niveau de confidence
- [ ] Nombre d'URLs sans correspondance
- [ ] Progression de la validation

## 🎨 Spécifications UI/UX

### Tableau de validation
```
┌─────────────────────────────┬──────────────────┬───────────┬─────────┬──────────┐
│ Ancienne URL                │ Nouvelle URL     │ Score     │ Statut  │ Actions  │
├─────────────────────────────┼──────────────────┼───────────┼─────────┼──────────┤
│ /camping-presentation-gard  │ /presentation    │ 0.95 🟢   │ Validé  │ ✓ ✗ ✏️  │
│ /mobil-home-luxe           │ /nos-locatifs    │ 0.85 🟠   │ À vérif │ ✓ ✗ ✏️  │
│ /vieux-restaurant          │ /restauration    │ 0.65 🔴   │ À modif │ ✓ ✗ ✏️  │
│ /page-obsolete             │ [Non matché]     │ -         │ Aucune  │ + ✗    │
└─────────────────────────────┴──────────────────┴───────────┴─────────┴──────────┘
```

### Codes couleur
- 🟢 **Vert** : Confidence > 0.9 (Excellent)
- 🟠 **Orange** : Confidence 0.7-0.9 (Bon)
- 🔴 **Rouge** : Confidence < 0.7 (À vérifier)
- ⚪ **Gris** : Non matché par IA

### Actions disponibles
- ✅ **Valider** : Accepter la suggestion
- ❌ **Rejeter** : Supprimer cette correspondance  
- ✏️ **Modifier** : Changer la nouvelle URL
- ➕ **Assigner** : Créer une correspondance manuelle

## 🔧 Spécifications techniques

### États des correspondances
```python
class MatchStatus(Enum):
    SUGGESTED = "suggested"      # Suggestion IA non validée
    VALIDATED = "validated"      # Validée par l'utilisateur
    REJECTED = "rejected"        # Rejetée par l'utilisateur
    MODIFIED = "modified"        # Modifiée manuellement
    MANUAL = "manual"           # Créée manuellement
    UNMATCHED = "unmatched"     # Aucune suggestion IA
```

### Persistance des modifications
- Sauvegarde automatique des changements en session Streamlit
- Export possible à tout moment (même validation partielle)
- Possibilité de reprendre la validation plus tard

## 🧪 Scénarios de test

### Test 1: Validation rapide suggestions excellentes
```
Donné: 100 correspondances avec confidence > 0.9
Quand: L'utilisateur clique "Valider tout excellent"
Alors: Toutes sont marquées comme validées
```

### Test 2: Modification d'une suggestion
```
Donné: /mobil-home-luxe → /nos-locatifs (0.85)
Quand: L'utilisateur modifie vers /hebergements
Alors: Statut = "modified", nouvelle URL = /hebergements
```

### Test 3: Correspondance manuelle
```
Donné: /page-obsolete [Non matché]
Quand: L'utilisateur assigne manuellement vers /accueil
Alors: Statut = "manual", correspondance créée
```

## 📊 Métriques de validation

### Dashboard de validation
```
📊 Progression de la validation
├── ✅ Validées : 245/400 (61%)
├── ✏️ Modifiées : 55/400 (14%)
├── ❌ Rejetées : 25/400 (6%)
└── ⏳ À traiter : 75/400 (19%)

🎯 Qualité des suggestions IA :
├── Excellent (>0.9) : 89% validées
├── Bon (0.7-0.9) : 67% validées
└── À vérifier (<0.7) : 12% validées
```

### Alertes qualité
- ⚠️ **Attention** : Si < 70% de validation sur suggestions "Bon"
- 🔴 **Problème** : Si < 50% de validation sur suggestions "Excellent"

## 🚫 Exclusions

- Validation automatique sans contrôle humain
- Modification de la logique de matching IA (US009)
- Gestion des langues (US011/US012)

## 🔄 Statut
**🔄 À développer** - Interface Streamlit avec tableau interactif

---

*US010 développée pour SEPTEO Digital Services*  
*Interface de validation humaine pour matching IA*