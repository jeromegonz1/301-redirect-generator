# US014 - Prompt Contextuel du Chef de Projet

## ğŸ“‹ Contexte
L'IA de matching a besoin de contexte mÃ©tier pour bien comprendre les changements de structure, terminologie, et stratÃ©gie Ã©ditoriale entre ancien et nouveau site.

## ğŸ¯ User Story

**En tant que** chef de projet digital,  
**je veux** pouvoir transmettre un prompt personnalisÃ© Ã  l'IA pour lui expliquer le contexte Ã©ditorial du site,  
**afin d'** obtenir un matching plus pertinent et mÃ©tier-aware.

## âœ… CritÃ¨res d'acceptation

### Interface de saisie contextuelle
- [ ] Zone de texte large pour instructions libres (500+ caractÃ¨res)
- [ ] Placeholder avec exemples concrets d'instructions utiles
- [ ] Sauvegarde automatique du contexte en session
- [ ] Templates prÃ©-remplis pour cas courants

### Injection dans le prompt IA
- [ ] Contexte injectÃ© au dÃ©but du prompt systÃ¨me GPT
- [ ] Formatage automatique pour optimiser la comprÃ©hension IA
- [ ] Gestion des instructions multilingues
- [ ] Limitation de taille (max 1000 caractÃ¨res) pour Ã©viter les coÃ»ts

### Types d'instructions supportÃ©es
- [ ] **Renommage de sections** : "blog devient actualitÃ©s"
- [ ] **Langues actives/inactives** : "ES non migrÃ©"
- [ ] **Structure Ã©ditoriale** : "pages principales vs blog"
- [ ] **Terminologie mÃ©tier** : "mobil-home devient nos locatifs"
- [ ] **PrioritÃ©s SEO** : "prÃ©server les URLs Ã  fort trafic"

## ğŸ¨ Interface utilisateur

### Zone de saisie contextuelle
```
ğŸ’¬ Instructions pour l'IA (optionnel mais recommandÃ©)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Expliquez le contexte de votre refonte Ã  l'IA :            â”‚
â”‚                                                             â”‚
â”‚ Le site est en FR/EN/DE. Le contenu ES n'a pas Ã©tÃ© migrÃ©. â”‚
â”‚ Les sections ont changÃ© :                                   â”‚
â”‚ - "mobil-home" devient "nos locatifs"                      â”‚
â”‚ - "blog" devient "actualitÃ©s"                              â”‚
â”‚ - "restaurant" devient "restauration"                       â”‚
â”‚                                                             â”‚
â”‚ Structure Ã©ditoriale :                                      â”‚
â”‚ - Pages principales : /presentation, /hebergement          â”‚
â”‚ - Blog : /actualites/[slug]                                â”‚
â”‚ - Langues : /fr/, /en/, /de/                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ’¡ Plus le contexte est prÃ©cis, meilleur sera le matching !
CaractÃ¨res : 287/1000
```

### Templates prÃ©dÃ©finis
```
ğŸ“‹ Templates courants (cliquer pour remplir) :

[ğŸ¨ Site hÃ´tellerie] [ğŸª E-commerce] [ğŸ¢ Corporate] [ğŸ“° Blog/MÃ©dia]

Template "Site hÃ´tellerie" :
- Services â†’ Prestations
- RÃ©servation â†’ Booking  
- Chambres â†’ HÃ©bergements
- Restaurant â†’ Restauration
- Langues : FR/EN principales
```

## ğŸ’¬ Exemples d'instructions efficaces

### Exemple 1: Refonte hÃ´tellerie
```
Le camping devient un resort 4*. 
Vocabulaire upgrading:
- "mobil-home" â†’ "villa premium"
- "emplacement" â†’ "espace privatif"
- "restaurant" â†’ "gastronomie"
- "animations" â†’ "expÃ©riences"

Structure nouvelle:
- /hebergements/ (villas, emplacements)
- /experiences/ (ex-animations)
- /gastronomie/ (ex-restaurant)
```

### Exemple 2: Refonte multilingue
```
Site corporate FR/EN/DE.
- Contenu ES/IT archivÃ© (redirection /fr/)
- "Nos solutions" â†’ "Our solutions" â†’ "Unsere LÃ¶sungen"
- Blog centralisÃ© : /actualites/, /news/, /nachrichten/
- Pages commerciales prioritaires SEO
```

### Exemple 3: Refonte e-commerce
```
Migration Prestashop â†’ Shopify.
CatÃ©gories renommÃ©es:
- "Ã‰lectronique" â†’ "High-tech"
- "Maison & Jardin" â†’ "Lifestyle"
- "VÃªtements" â†’ "Mode"

URLs produits: /p/[slug] â†’ /products/[slug]
Categories: /c/[slug] â†’ /collections/[slug]
```

## ğŸ”§ ImplÃ©mentation technique

### Injection dans le prompt GPT
```python
def build_context_prompt(user_context: str, language: str = "fr") -> str:
    system_prompt = f"""
Tu es un expert en redirections 301 pour des refontes de sites web.

CONTEXTE MÃ‰TIER FOURNI PAR LE CHEF DE PROJET :
{user_context}

Utilise ce contexte pour comprendre :
- Les changements de terminologie
- La nouvelle structure Ã©ditoriale  
- Les langues actives/inactives
- Les prioritÃ©s SEO du projet

Instructions gÃ©nÃ©rales :
- Analyse le sens et le contenu de chaque URL
- Priorise les correspondances exactes
- Utilise le contexte mÃ©tier pour les cas ambigus
- Confidence entre 0.0 et 1.0
"""
    return system_prompt
```

### Classe ContextualAIMapper
```python
class ContextualAIMapper(AIMapper):
    def __init__(self, api_key: str):
        super().__init__(api_key)
        self.user_context = ""
    
    def set_context(self, context: str):
        """DÃ©finit le contexte mÃ©tier"""
        self.user_context = self.validate_and_format_context(context)
    
    def validate_and_format_context(self, context: str) -> str:
        """Valide et formate le contexte utilisateur"""
        # Limitation de taille
        if len(context) > 1000:
            context = context[:1000] + "..."
        
        # Formatage pour optimiser la comprÃ©hension IA
        formatted = f"""
        CONTEXTE PROJET :
        {context}
        
        INSTRUCTIONS DE MATCHING :
        - Utilise ce contexte pour tous les matchings
        - En cas d'ambiguÃ¯tÃ©, priorise les informations ci-dessus
        - Mentionne le contexte dans tes raisons de matching
        """
        
        return formatted
```

## ğŸ§ª Impact sur la qualitÃ© du matching

### Avant contexte (matching gÃ©nÃ©rique)
```
/mobil-home-luxe â†’ /hebergements (confidence: 0.65)
Raison: "Correspondance approximative basÃ©e sur le logement"
```

### AprÃ¨s contexte mÃ©tier
```
/mobil-home-luxe â†’ /nos-locatifs (confidence: 0.92)  
Raison: "Contexte projet: 'mobil-home devient nos locatifs'"
```

### Exemples d'amÃ©lioration
| URL ancienne | Sans contexte | Avec contexte | Gain |
|--------------|---------------|---------------|------|
| `/blog/article-1` | `/actualites/` (0.70) | `/actualites/article-1` (0.95) | +25% |
| `/restaurant-gard` | `/services` (0.60) | `/restauration` (0.90) | +30% |
| `/camping-presentation` | `/accueil` (0.50) | `/presentation` (0.95) | +45% |

## ğŸ“Š MÃ©triques d'efficacitÃ©

### AmÃ©lioration du matching
```
ğŸ“ˆ Impact du contexte mÃ©tier sur la qualitÃ©

Sans contexte utilisateur :
â”œâ”€â”€ Confidence moyenne : 0.74
â”œâ”€â”€ Suggestions > 0.9 : 23%
â””â”€â”€ Validation humaine : 68%

Avec contexte utilisateur :
â”œâ”€â”€ Confidence moyenne : 0.87 (+18%)
â”œâ”€â”€ Suggestions > 0.9 : 45% (+22%)
â””â”€â”€ Validation humaine : 89% (+21%)

ğŸ’¡ Gain moyen : +20% de qualitÃ© de matching
```

### Templates les plus efficaces
1. **Renommage terminologie** : +25% de prÃ©cision
2. **Structure Ã©ditoriale** : +20% de prÃ©cision  
3. **Langues actives/inactives** : +15% de prÃ©cision
4. **PrioritÃ©s SEO** : +10% de prÃ©cision

## ğŸš« Exclusions

- GÃ©nÃ©ration automatique du contexte (analyse de contenu)
- Templates spÃ©cialisÃ©s par secteur (v1 gÃ©nÃ©rique)
- Contexte multilingue automatique (saisie manuelle)
- Apprentissage et mÃ©morisation entre sessions

## ğŸ”„ Statut
**ğŸ”„ Ã€ dÃ©velopper** - Interface contextuelle + injection prompt GPT

---

*US014 dÃ©veloppÃ©e pour SEPTEO Digital Services*  
*Prompt contextuel pour matching IA mÃ©tier-aware*